model User {
  id             String              @id @default(cuid())
  email          String              @unique
  name           String?
  nickname       String?
  role           Role                @default(USER)
  passwordHash   String
  favoriteApps   AppCode[]           @default([])
  projects       Project[]
  appPermissions UserAppPermission[]
  workoutRoundResults WorkoutRoundResult[]
  createdAt      DateTime            @default(now())
  updatedAt      DateTime            @updatedAt
}

model UserAppPermission {
  id        String   @id @default(cuid())
  userId    String
  app       AppCode
  canRead   Boolean  @default(false)
  canEdit   Boolean  @default(false)
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([userId, app])
  @@index([app])
}
